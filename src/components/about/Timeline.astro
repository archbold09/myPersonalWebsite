---
import type { Experience, Education } from '../../types';

interface Props {
  items: (Experience | Education)[];
  type: 'experience' | 'education';
}

const { items, type } = Astro.props;

function isExperience(item: Experience | Education): item is Experience {
  return 'company' in item;
}
---

<div class="relative">
  <!-- Timeline line -->
  <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary-500 via-accent-pink to-accent-blue"></div>

  <!-- Timeline items -->
  <div class="space-y-8">
    {items.map((item, index) => (
      <div class={`relative flex items-start gap-6 md:gap-0 ${index % 2 === 0 ? 'md:flex-row' : 'md:flex-row-reverse'}`}>
        <!-- Timeline dot -->
        <div class="absolute left-4 md:left-1/2 w-4 h-4 -translate-x-1/2 rounded-full bg-primary-500 ring-4 ring-slate-950 z-10"></div>

        <!-- Content -->
        <div class={`ml-12 md:ml-0 md:w-1/2 ${index % 2 === 0 ? 'md:pr-12 md:text-right' : 'md:pl-12'}`}>
          <div class="glass p-6 card-hover">
            <span class="inline-block px-3 py-1 text-xs font-medium rounded-full bg-primary-500/20 text-primary-400 mb-3">
              {isExperience(item) ? item.period : item.period}
            </span>

            <h3 class="text-lg font-semibold mb-1">
              {isExperience(item) ? item.role : item.degree}
            </h3>

            <p class="text-primary-400 text-sm mb-2">
              {isExperience(item) ? item.company : item.institution}
            </p>

            {isExperience(item) && item.description && (
              <p class="text-slate-400 text-sm">
                {item.description}
              </p>
            )}
          </div>
        </div>
      </div>
    ))}
  </div>
</div>
